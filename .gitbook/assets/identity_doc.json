{"swagger":"2.0","info":{"title":"Identity Service","version":"1.3.0","description":"These are the available endpoints for querying the Identity Service. For more information drop me an email at carlos.sanchez at ubirch.com","termsOfService":"https://ubirch.de","contact":{"name":"carlos.sanchez@ubirch.com"},"license":{"name":"Apache License, Version 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"}},"paths":{"/":{"get":{"operationId":"simpleCheck","summary":"Welcome","description":"Getting a hello from the system","tags":["Welcome"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/hello":{"get":{"operationId":"simpleCheck","summary":"Welcome","description":"Getting a hello from the system","tags":["Welcome"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/hola":{"get":{"operationId":"simpleCheck","summary":"Welcome","description":"Getting a hello from the system","tags":["Welcome"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/ping":{"get":{"operationId":"simpleCheck","summary":"Welcome","description":"Getting a hello from the system","tags":["Welcome"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/api/keyService/v1/check":{"get":{"operationId":"getV1Check","summary":"Welcome / Health","description":"Check if KeyController service is up and running","tags":["Health"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Simple"}},"400":{"description":"Not successful response"}}}},"/api/keyService/v1/deepCheck":{"get":{"operationId":"getV1DeepCheck","summary":"Health monitor deep check","description":"allows a deep check of the service","tags":["Health"],"deprecated":false,"parameters":[],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/BooleanListResponse"}},"400":{"description":"something is not fine"}}}},"/api/keyService/v1/pubkey":{"delete":{"operationId":"deleteV1PubKey","summary":"Deletes a public key","description":"deletes a public key","tags":["Key Service"],"deprecated":false,"parameters":[{"name":"publicKeyToDelete","description":"the public key id to delete including signature of publicKey field","required":true,"in":"body","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PublicKeyDelete"}},"400":{"description":"Failed to delete public key"},"500":{"description":"Sorry, something went wrong on our end"}}},"post":{"operationId":"postV1PubKey","summary":"Stores new public key","description":"stores the given public key with its unique pubKeyID","tags":["Key Service"],"deprecated":false,"parameters":[{"name":"pubkey","description":"the new public key object with the pubKey that should be stored for the unique pubKeyId - also part of the pub key object - in the key registry to be able to find the public key; pubKeyId may not exist already","required":true,"in":"body","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PublicKey"}},"400":{"description":"Error creating pub key"},"500":{"description":"Sorry, something went wrong on our end"}}}},"/api/keyService/v1/pubkey/current/hardwareId/{hardwareId}":{"get":{"operationId":"getV1CurrentHardwareId","summary":"Queries all currently valid public keys for this hardwareId","description":"queries all currently valid public keys based on the hardwareId","tags":["Key Service"],"deprecated":false,"parameters":[{"name":"hardwareId","description":"hardwareId for which to search for currently valid public keys","required":true,"in":"path","type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/PublicKey"}}},"400":{"description":"No hardwareId parameter found in path"},"500":{"description":"Sorry, something went wrong on our end"}}}},"/api/keyService/v1/pubkey/mpack":{"post":{"operationId":"postV1PubKeyMsgPack","summary":"Stores new public key received as msgpack format","description":"stores the given public key with its unique pubKeyID","consumes":["application/octet-stream"],"produces":["application/json"],"tags":["Key Service"],"deprecated":false,"parameters":[{"name":"pubkey","description":"a mgspack representation of the public key registration. The format follows both the json structure (with binary values instead of encoded) as well as the [ubirch-protocol](https://github.com/ubirch/ubirch-protocol#key-registration) format.","required":true,"in":"body","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","schema":{"type":"string"}},"400":{"description":"Error creating pub key"},"500":{"description":"Sorry, something went wrong on our end"}}}},"/api/keyService/v1/pubkey/revoke":{"delete":{"operationId":"revokeV1PubKey","summary":"Revokes a public key","description":"revokes a public key","tags":["Key Service"],"deprecated":false,"parameters":[{"name":"publicKeyToRevoke","description":"the public key id to revoke including signature of publicKey field","required":true,"in":"body","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PublicKeyRevoke"}},"400":{"description":"Failed to revoke public key"},"500":{"description":"Sorry, something went wrong on our end"}}}},"/api/keyService/v1/pubkey/{pubkey}":{"get":{"operationId":"getV1PubKeyPubKey","summary":"Retrieves public key","description":"retrieves the given public key found by pubKeyID in the key registry with the given data; the public key must exist already","tags":["Key Service"],"deprecated":false,"parameters":[{"name":"pubkey","description":"public key for which to search for currently valid public keys","required":true,"in":"path","type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PublicKey"}},"400":{"description":"No pubKeyId parameter found in path"},"404":{"description":"Key not found"}}}},"/api/certs/v1/cert/register":{"post":{"operationId":"CertRegister","summary":"Creates a key in the identity service based on a X509 cert","description":"Creates a key in the identity service based on a X509 cert sent as bytes to this endpoint (DER format)","tags":["Cert Service"],"deprecated":false,"parameters":[{"name":"cert request","description":"The X509 certificate","required":true,"in":"body","schema":{"type":"string","format":"byte"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Nothing$"}},"400":{"description":"Error registering Cert"},"500":{"description":"1.2 Sorry, something went wrong on our end"}}}},"/api/certs/v1/csr/register":{"post":{"operationId":"CSRRegister","summary":"Certification Signing Requests","description":"Validates and stores Certification Signing Requests sent as bytes to this endpoint (DER format)","tags":["Cert Service"],"deprecated":false,"parameters":[{"name":"csr request","description":"The certification request","required":true,"in":"body","schema":{"type":"string","format":"byte"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Nothing$"}},"400":{"description":"Error registering csr"},"500":{"description":"1.2 Sorry, something went wrong on our end"}}}}},"definitions":{"List[Throwable]":{"type":"object","properties":{}},"PublicKeyDelete":{"type":"object","properties":{"publicKey":{"type":"string"},"signature":{"type":"string"}},"required":["publicKey","signature"]},"StackTraceElement":{"type":"object","properties":{"declaringClass":{"type":"string"},"methodName":{"type":"string"},"fileName":{"type":"string"},"lineNumber":{"type":"integer","format":"int32"}},"required":["declaringClass","methodName","fileName","lineNumber"]},"Throwable":{"type":"object","properties":{"detailMessage":{"type":"string"},"cause":{"$ref":"#/definitions/Throwable"},"stackTrace":{"type":"array","items":{"$ref":"#/definitions/StackTraceElement"}},"suppressedExceptions":{"type":"array","items":{"$ref":"#/definitions/Throwable"}}},"required":["detailMessage","cause","stackTrace","suppressedExceptions"]},"PublicKeyInfo":{"type":"object","properties":{"validNotBefore":{"type":"string","format":"date-time"},"prevPubKeyId":{"type":"string"},"revokedAt":{"type":"string","format":"date-time"},"pubKeyId":{"type":"string"},"algorithm":{"type":"string"},"pubKey":{"type":"string"},"validNotAfter":{"type":"string","format":"date-time"},"created":{"type":"string","format":"date-time"},"hwDeviceId":{"type":"string"}},"required":["algorithm","created","hwDeviceId","pubKey","pubKeyId","validNotBefore"]},"Simple":{"type":"object","properties":{"version":{"type":"string"},"status":{"$ref":"#/definitions/Symbol"},"message":{"type":"string"}},"required":["version","status","message"]},"BooleanListResponse":{"type":"object","properties":{"version":{"type":"string"},"status":{"type":"boolean"},"messages":{"type":"array","items":{"type":"string"}}},"required":["version","status","messages"]},"PublicKey":{"type":"object","properties":{"pubKeyInfo":{"$ref":"#/definitions/PublicKeyInfo"},"signature":{"type":"string"},"prevSignature":{"type":"string"}},"required":["pubKeyInfo","signature"]},"PublicKeyRevoke":{"type":"object","properties":{"publicKey":{"type":"string"},"signature":{"type":"string"}},"required":["publicKey","signature"]}},"securityDefinitions":{}}